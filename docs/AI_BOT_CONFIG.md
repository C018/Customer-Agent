# AI Bot é…ç½®æŒ‡å—

æœ¬ç³»ç»Ÿæ”¯æŒä¸‰ç§AI Botç±»å‹ï¼šCozeã€OpenAI å’Œ Azure OpenAIã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„AIæœåŠ¡ã€‚

## ğŸ¯ æ¨èé…ç½®æ–¹å¼ï¼šä½¿ç”¨è®¾ç½®ç•Œé¢ï¼ˆæ–°åŠŸèƒ½ï¼‰

**ç°åœ¨æ‚¨å¯ä»¥é€šè¿‡è®¾ç½®ç•Œé¢è½»æ¾é…ç½®å’Œåˆ‡æ¢AIæœåŠ¡ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼**

### ä½¿ç”¨æ­¥éª¤

1. **å¯åŠ¨åº”ç”¨ç¨‹åº**
   ```bash
   python app.py
   ```

2. **è¿›å…¥è®¾ç½®ç•Œé¢**
   - åœ¨ä¸»ç•Œé¢ä¸­ç‚¹å‡»"è®¾ç½®"é€‰é¡¹å¡

3. **é€‰æ‹©AIæœåŠ¡ç±»å‹**
   - åœ¨"AI æœåŠ¡é€‰æ‹©"å¡ç‰‡ä¸­ï¼Œä»ä¸‹æ‹‰èœå•é€‰æ‹©æ‚¨æƒ³ä½¿ç”¨çš„AIæœåŠ¡

4. **é…ç½®AIæœåŠ¡**
   - ç³»ç»Ÿä¼šè‡ªåŠ¨æ˜¾ç¤ºå¯¹åº”çš„é…ç½®è¡¨å•
   - å¡«å†™å¿…å¡«é¡¹ï¼ˆç”¨çº¢è‰²æ ‡è®°ï¼‰
   - æ ¹æ®éœ€è¦è°ƒæ•´å¯é€‰å‚æ•°

5. **é…ç½®ä¸šåŠ¡æ—¶é—´**
   - è®¾ç½®AIå®¢æœçš„å·¥ä½œæ—¶é—´

6. **ä¿å­˜é…ç½®**
   - ç‚¹å‡»"ä¿å­˜"æŒ‰é’®
   - ç³»ç»Ÿä¼šè‡ªåŠ¨éªŒè¯é…ç½®å¹¶ä¿å­˜

### ä¼˜åŠ¿
- âœ… æ— éœ€æ‰‹åŠ¨ç¼–è¾‘JSONæ–‡ä»¶
- âœ… å®æ—¶è¡¨å•éªŒè¯
- âœ… å¯è§†åŒ–ç•Œé¢ï¼Œæ“ä½œç®€å•
- âœ… åˆ‡æ¢æœåŠ¡ä¸ä¸¢å¤±é…ç½®
- âœ… æ¸…æ™°çš„é”™è¯¯æç¤º

## ğŸ“ æ‰‹åŠ¨é…ç½®æ–¹å¼ï¼ˆé«˜çº§ç”¨æˆ·ï¼‰

å¦‚æœæ‚¨æ›´å–œæ¬¢ç›´æ¥ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹è¯´æ˜æ“ä½œã€‚

## é…ç½®æ–‡ä»¶ä½ç½®

é…ç½®æ–‡ä»¶ä½äºé¡¹ç›®æ ¹ç›®å½•ï¼š`config.json`

å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œç³»ç»Ÿä¼šåœ¨é¦–æ¬¡è¿è¡Œæ—¶è‡ªåŠ¨åˆ›å»ºé»˜è®¤é…ç½®ã€‚

## é…ç½®é€‰é¡¹

### 1. ä½¿ç”¨ Coze AIï¼ˆé»˜è®¤ï¼‰

```json
{
    "bot_type": "coze",
    "coze_api_base": "https://api.coze.cn",
    "coze_token": "ä½ çš„Coze API Token",
    "coze_bot_id": "ä½ çš„Coze Bot ID",
    "businessHours": {
        "start": "08:00",
        "end": "23:00"
    }
}
```

**é…ç½®è¯´æ˜ï¼š**
- `bot_type`: å¿…é¡»è®¾ç½®ä¸º `"coze"`
- `coze_api_base`: Coze API åŸºç¡€åœ°å€
- `coze_token`: ä» [Coze å¹³å°](https://www.coze.cn/) è·å–çš„ API Token
- `coze_bot_id`: åœ¨ Coze å¹³å°åˆ›å»ºçš„ Bot ID

### 2. ä½¿ç”¨ OpenAI

```json
{
    "bot_type": "openai",
    "openai_api_key": "ä½ çš„OpenAI API Key",
    "openai_api_base": "https://api.openai.com/v1",
    "openai_model": "gpt-3.5-turbo",
    "openai_max_tokens": 1000,
    "openai_temperature": 0.7,
    "openai_system_prompt": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç”µå•†å®¢æœåŠ©æ‰‹ï¼Œè¯·ç¤¼è²Œã€ä¸“ä¸šåœ°å›ç­”å®¢æˆ·çš„é—®é¢˜ã€‚",
    "businessHours": {
        "start": "08:00",
        "end": "23:00"
    }
}
```

**é…ç½®è¯´æ˜ï¼š**
- `bot_type`: å¿…é¡»è®¾ç½®ä¸º `"openai"`
- `openai_api_key`: ä» [OpenAI](https://platform.openai.com/) è·å–çš„ API Key
- `openai_api_base`: OpenAI API åŸºç¡€åœ°å€ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸ºå®˜æ–¹åœ°å€ï¼‰
- `openai_model`: ä½¿ç”¨çš„æ¨¡å‹åç§°ï¼ˆå¦‚ `gpt-3.5-turbo`ã€`gpt-4` ç­‰ï¼‰
- `openai_max_tokens`: å•æ¬¡å›å¤çš„æœ€å¤§tokenæ•°
- `openai_temperature`: æ¸©åº¦å‚æ•°ï¼ˆ0-1ï¼‰ï¼Œæ§åˆ¶å›å¤çš„éšæœºæ€§
- `openai_system_prompt`: ç³»ç»Ÿæç¤ºè¯ï¼Œå®šä¹‰AIçš„è§’è‰²å’Œè¡Œä¸º

**ä½¿ç”¨å›½å†…é•œåƒæˆ–ç¬¬ä¸‰æ–¹APIï¼š**

å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯å›½å†…é•œåƒæˆ–ç¬¬ä¸‰æ–¹OpenAIå…¼å®¹APIï¼Œå¯ä»¥ä¿®æ”¹ `openai_api_base`ï¼š

```json
{
    "bot_type": "openai",
    "openai_api_key": "ä½ çš„API Key",
    "openai_api_base": "https://your-proxy-domain.com/v1",
    "openai_model": "gpt-3.5-turbo"
}
```

### 3. ä½¿ç”¨ Azure OpenAI

```json
{
    "bot_type": "azure_openai",
    "azure_openai_api_key": "ä½ çš„Azure OpenAI API Key",
    "azure_openai_endpoint": "https://your-resource-name.openai.azure.com",
    "azure_openai_api_version": "2024-02-15-preview",
    "azure_openai_deployment_name": "ä½ çš„éƒ¨ç½²åç§°",
    "azure_openai_max_tokens": 1000,
    "azure_openai_temperature": 0.7,
    "azure_openai_system_prompt": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç”µå•†å®¢æœåŠ©æ‰‹ï¼Œè¯·ç¤¼è²Œã€ä¸“ä¸šåœ°å›ç­”å®¢æˆ·çš„é—®é¢˜ã€‚",
    "businessHours": {
        "start": "08:00",
        "end": "23:00"
    }
}
```

**é…ç½®è¯´æ˜ï¼š**
- `bot_type`: å¿…é¡»è®¾ç½®ä¸º `"azure_openai"`
- `azure_openai_api_key`: Azure OpenAI çš„ API Key
- `azure_openai_endpoint`: Azure OpenAI çš„ç«¯ç‚¹åœ°å€
- `azure_openai_api_version`: API ç‰ˆæœ¬ï¼ˆå»ºè®®ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ï¼‰
- `azure_openai_deployment_name`: åœ¨ Azure ä¸­åˆ›å»ºçš„éƒ¨ç½²åç§°
- `azure_openai_max_tokens`: å•æ¬¡å›å¤çš„æœ€å¤§tokenæ•°
- `azure_openai_temperature`: æ¸©åº¦å‚æ•°ï¼ˆ0-1ï¼‰ï¼Œæ§åˆ¶å›å¤çš„éšæœºæ€§
- `azure_openai_system_prompt`: ç³»ç»Ÿæç¤ºè¯ï¼Œå®šä¹‰AIçš„è§’è‰²å’Œè¡Œä¸º

**è·å– Azure OpenAI é…ç½®ä¿¡æ¯ï¼š**

1. ç™»å½• [Azure Portal](https://portal.azure.com/)
2. æ‰¾åˆ°æ‚¨çš„ Azure OpenAI èµ„æº
3. åœ¨"å¯†é’¥å’Œç»ˆç»“ç‚¹"é¡µé¢è·å–ï¼š
   - API Key
   - ç»ˆç»“ç‚¹ï¼ˆEndpointï¼‰
4. åœ¨"éƒ¨ç½²"é¡µé¢è·å–æ‚¨çš„éƒ¨ç½²åç§°

## è¥ä¸šæ—¶é—´é…ç½®

æ‰€æœ‰botç±»å‹éƒ½æ”¯æŒè¥ä¸šæ—¶é—´é…ç½®ï¼š

```json
{
    "businessHours": {
        "start": "08:00",
        "end": "23:00"
    }
}
```

- `start`: è¥ä¸šå¼€å§‹æ—¶é—´ï¼ˆ24å°æ—¶åˆ¶ï¼‰
- `end`: è¥ä¸šç»“æŸæ—¶é—´ï¼ˆ24å°æ—¶åˆ¶ï¼‰

åœ¨éè¥ä¸šæ—¶é—´ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å‘é€éè¥ä¸šæ—¶é—´æç¤ºï¼Œè€Œä¸ä¼šè°ƒç”¨AIè¿›è¡Œå›å¤ã€‚

## é…ç½®ç¤ºä¾‹

### å®Œæ•´çš„ OpenAI é…ç½®ç¤ºä¾‹

```json
{
    "bot_type": "openai",
    "openai_api_key": "sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    "openai_api_base": "https://api.openai.com/v1",
    "openai_model": "gpt-3.5-turbo",
    "openai_max_tokens": 1000,
    "openai_temperature": 0.7,
    "openai_system_prompt": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ‹¼å¤šå¤šå•†å®¶å®¢æœåŠ©æ‰‹ã€‚è¯·ç¤¼è²Œã€ä¸“ä¸šåœ°å›ç­”å®¢æˆ·çš„é—®é¢˜ã€‚å¯¹äºå•†å“ç›¸å…³çš„é—®é¢˜ï¼Œè¯·æä¾›è¯¦ç»†çš„ä¿¡æ¯ã€‚å¯¹äºç‰©æµé—®é¢˜ï¼Œè¯·å®‰æŠšå®¢æˆ·å¹¶è¯´æ˜ä¼šå°½å¿«å¤„ç†ã€‚",
    "businessHours": {
        "start": "08:00",
        "end": "23:00"
    }
}
```

### å®Œæ•´çš„ Azure OpenAI é…ç½®ç¤ºä¾‹

```json
{
    "bot_type": "azure_openai",
    "azure_openai_api_key": "your-32-character-api-key",
    "azure_openai_endpoint": "https://your-resource-name.openai.azure.com",
    "azure_openai_api_version": "2024-02-15-preview",
    "azure_openai_deployment_name": "gpt-35-turbo",
    "azure_openai_max_tokens": 1000,
    "azure_openai_temperature": 0.7,
    "azure_openai_system_prompt": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ‹¼å¤šå¤šå•†å®¶å®¢æœåŠ©æ‰‹ã€‚è¯·ç¤¼è²Œã€ä¸“ä¸šåœ°å›ç­”å®¢æˆ·çš„é—®é¢˜ã€‚å¯¹äºå•†å“ç›¸å…³çš„é—®é¢˜ï¼Œè¯·æä¾›è¯¦ç»†çš„ä¿¡æ¯ã€‚å¯¹äºç‰©æµé—®é¢˜ï¼Œè¯·å®‰æŠšå®¢æˆ·å¹¶è¯´æ˜ä¼šå°½å¿«å¤„ç†ã€‚",
    "businessHours": {
        "start": "08:00",
        "end": "23:00"
    }
}
```

## åˆ‡æ¢AIæœåŠ¡

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è®¾ç½®ç•Œé¢ï¼ˆæ¨èï¼‰

1. æ‰“å¼€åº”ç”¨ç¨‹åºï¼Œè¿›å…¥"è®¾ç½®"é¡µé¢
2. åœ¨"AI æœåŠ¡é€‰æ‹©"ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©æ–°çš„AIæœåŠ¡
3. å¡«å†™æ–°AIæœåŠ¡çš„é…ç½®ä¿¡æ¯
4. ç‚¹å‡»"ä¿å­˜"æŒ‰é’®
5. æ–°çš„AIæœåŠ¡ä¼šç«‹å³ç”Ÿæ•ˆ

**ä¼˜åŠ¿**: æ‰€æœ‰AIæœåŠ¡çš„é…ç½®éƒ½ä¼šè¢«ä¿ç•™ï¼Œåˆ‡æ¢å›ä¹‹å‰çš„æœåŠ¡æ—¶é…ç½®ä¼šè‡ªåŠ¨æ¢å¤ã€‚

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶

è¦åˆ‡æ¢AIæœåŠ¡ï¼Œåªéœ€ä¿®æ”¹ `config.json` ä¸­çš„ `bot_type` å­—æ®µï¼Œå¹¶ç¡®ä¿ç›¸åº”çš„é…ç½®é¡¹å·²æ­£ç¡®å¡«å†™ã€‚ä¿®æ”¹åéœ€è¦é‡å¯åº”ç”¨ç¨‹åºã€‚

## æ³¨æ„äº‹é¡¹

1. **API Key å®‰å…¨**: è¯·å¦¥å–„ä¿ç®¡æ‚¨çš„ API Keyï¼Œä¸è¦å°†å…¶æäº¤åˆ°å…¬å¼€çš„ä»£ç ä»“åº“
2. **æˆæœ¬æ§åˆ¶**: ä½¿ç”¨ OpenAI æˆ– Azure OpenAI ä¼šäº§ç”Ÿè´¹ç”¨ï¼Œå»ºè®®è®¾ç½®åˆç†çš„ `max_tokens` å€¼
3. **ç³»ç»Ÿæç¤ºè¯**: å¯ä»¥æ ¹æ®æ‚¨çš„ä¸šåŠ¡éœ€æ±‚è‡ªå®šä¹‰ `system_prompt`ï¼Œä½¿AIçš„å›å¤æ›´ç¬¦åˆæ‚¨çš„éœ€æ±‚
4. **æ¨¡å‹é€‰æ‹©**: ä¸åŒæ¨¡å‹æœ‰ä¸åŒçš„æ€§èƒ½å’Œæˆæœ¬ï¼Œè¯·æ ¹æ®éœ€æ±‚é€‰æ‹©
   - `gpt-3.5-turbo`: æ€§ä»·æ¯”é«˜ï¼Œå“åº”å¿«
   - `gpt-4`: èƒ½åŠ›æ›´å¼ºï¼Œä½†æˆæœ¬æ›´é«˜

## æ•…éšœæ’é™¤

### é…ç½®ç›¸å…³é—®é¢˜

#### æ— æ³•ä¿å­˜é…ç½®

**å¯èƒ½åŸå› **:
- ç¼ºå°‘å¿…å¡«é¡¹
- æ—¶é—´è®¾ç½®ä¸åˆç†ï¼ˆå¼€å§‹æ—¶é—´æ™šäºç»“æŸæ—¶é—´ï¼‰

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥é”™è¯¯æç¤ºä¿¡æ¯
- ç¡®ä¿å¡«å†™äº†æ‰€æœ‰å¸¦*çš„å¿…å¡«é¡¹
- éªŒè¯æ—¶é—´è®¾ç½®çš„åˆç†æ€§

### 1. Botåˆå§‹åŒ–å¤±è´¥

**é”™è¯¯ä¿¡æ¯**: "Failed to initialize OpenAI Bot"

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥API Keyæ˜¯å¦æ­£ç¡®
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ç¡®è®¤APIä½™é¢å……è¶³

### 2. APIè°ƒç”¨å¤±è´¥

**é”™è¯¯ä¿¡æ¯**: "OpenAI API call failed"

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥APIé…ç½®æ˜¯å¦æ­£ç¡®
- æŸ¥çœ‹æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
- ç¡®è®¤APIæœåŠ¡çŠ¶æ€æ­£å¸¸

### 3. Azure OpenAIè¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**: "Azure OpenAI endpoint is not configured"

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®è®¤å·²æ­£ç¡®é…ç½® `azure_openai_endpoint`
- æ£€æŸ¥endpointåœ°å€æ ¼å¼æ˜¯å¦æ­£ç¡®
- ç¡®è®¤Azure OpenAIèµ„æºå·²æ­£ç¡®éƒ¨ç½²

## è·å–å¸®åŠ©

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- é¡¹ç›® [GitHub Issues](https://github.com/C018/Customer-Agent/issues)
- æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
